"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.FeatureFlagService = void 0;
const commands_1 = require("../constants/commands");
class FeatureFlagService {
    constructor(commandExecutor) {
        this.commandExecutor = commandExecutor;
    }
    async fetchFeatureFlag(flagName, fallbackValue = false) {
        var _a;
        try {
            const ffStatus = await this.commandExecutor.executeCommand(commands_1.SNYK_FEATURE_FLAG_COMMAND, flagName);
            console.log(`[FeatureFlagService] ${flagName} is ${(ffStatus === null || ffStatus === void 0 ? void 0 : ffStatus.ok) ? 'enabled' : 'disabled'}`);
            return (_a = ffStatus === null || ffStatus === void 0 ? void 0 : ffStatus.ok) !== null && _a !== void 0 ? _a : false;
        }
        catch (error) {
            console.warn(`[FeatureFlagService] Failed to fetch feature flag ${flagName}: ${error}`);
            return fallbackValue;
        }
    }
}
exports.FeatureFlagService = FeatureFlagService;
//# sourceMappingURL=featureFlagService.js.map