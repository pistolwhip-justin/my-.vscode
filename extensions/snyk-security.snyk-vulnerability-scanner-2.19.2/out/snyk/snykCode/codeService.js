"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.SnykCodeService = void 0;
const types_1 = require("../common/languageServer/types");
const productService_1 = require("../common/services/productService");
const codeIssuesActionsProvider_1 = require("./codeActions/codeIssuesActionsProvider");
class SnykCodeService extends productService_1.ProductService {
    constructor(extensionContext, config, suggestionProvider, codeActionAdapter, codeActionKindAdapter, viewManagerService, workspace, workspaceTrust, languageServer, languages, diagnosticsIssueProvider, logger) {
        super(extensionContext, config, suggestionProvider, viewManagerService, workspace, workspaceTrust, languageServer, languages, diagnosticsIssueProvider, logger);
        this.codeActionAdapter = codeActionAdapter;
        this.codeActionKindAdapter = codeActionKindAdapter;
        this.diagnosticsIssueProvider = diagnosticsIssueProvider;
        this.productType = types_1.ScanProduct.Code;
        this.registerCodeActionsProvider(new codeIssuesActionsProvider_1.SnykCodeActionsProvider(this.result, codeActionAdapter, codeActionKindAdapter, languages, config));
    }
    subscribeToLsScanMessages() {
        return this.languageServer.scan$.subscribe((scan) => {
            if (scan.product !== types_1.ScanProduct.Code) {
                return;
            }
            super.handleLsScanMessage(scan);
        });
    }
    refreshTreeView() {
        this.viewManagerService.refreshAllCodeAnalysisViews();
    }
}
exports.SnykCodeService = SnykCodeService;
//# sourceMappingURL=codeService.js.map